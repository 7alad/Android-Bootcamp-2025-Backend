# Android-Bootcamp-2025-Backend

## Команда: nonNull

Разработать программный продукт для помощи в осуществлении волонтерской деятельности в клиент-серверной архитектуре.

Клиент - Android Приложение, реализованное на java или kotlin с адаптивной версткой.
Мобильное приложение должно предоставлять удобный и интуитивно понятный интерфейс для волонтеров, в котором можно зарегистрироваться в базу волонтеров, просмотреть ближайшие волонтерские центры, отредактировать собственный профиль и посмотреть активных волонтеров в конкретном центре. В случае авторизации с правами администратора, пользователь приложения должен иметь возможность просмотреть список не занятых волонтеров и их контактные данные.

Сервер - микросервис на Spring Boot, работающий с In-memory базой данных H2.
Серверное приложение должно предоставлять API необходимый для работы мобильного приложения. Осуществлять все основные манипуляции с данными в СУБД при помощи Spring Data JPA. Данные о всех зарегистрированных волонтерских центрах должны быть предзаполнены в БД при запуске приложения.Создание схемы БД и предзаполнение данными необходимо реализовать с использованием liquibase.

-----

**Приложение для помощи в волонтёрской деятельности**

Мы разрабатываем приложение “Приложение для помощи в волонтёрской деятельности” с клиент-серверной архитектурой.

*Клиент:* Android-приложение (Java/Kotlin) с функциями:

1. Регистрация в базу волонтёрских центров.
2. Авторизация.
3. Просмотр ближайших волонтёрских центров.
4. Просмотр активных волонтёров в конкретном центре.
5. Редактирование собственного профиля.

*Сервер:* Spring Boot приложение с In-memory базой данных H2, предоставляющее API для работы с данными о волонтёрских центрах и активных волонтёров.

*Роли:*

1. Волонтёр.
2. Администратор.

**1. Определение функциональных требований**

Сформулируем основные сценарии использования:

1. Регистрация в базу волонтёрских центров для доступа к списку волонтёрских центров.
2. Авторизация волонтёра для доступа к списку волонтёрских центров.
3. Просмотр ближайших волонтёрских центров.
4. Просмотр активных волонтёров в конкретном центре.
5. Редактирование собственного профиля.

**2. User story**

Как волонтёр, я хочу зарегистрироваться в базу волонтёров, чтобы получить доступ к списку волонтёрских центров и информации об активных волонтёрах.

Как волонтёр, я хочу авторизоваться, чтобы получить доступ к списку волонтёрских центров и информации об активных волонтёрах.

Как волонтёр, я хочу видеть информацию о ближайших волонтёрских центрах, чтобы найти подходящий.

Как волонтёр, я хочу видеть информацию о конкретном волонтёрском центре, чтобы понять, подходит он мне или нет.

Как волонтёр, я хочу видеть список активных волонтёров, чтобы понять, кто прикреплён к данному волонтёрскому центру.

Как волонтёр, я хочу редактировать свои данные, чтобы информация обо мне была актуальной.

Как волонтёр, я хочу иметь возможность самостоятельно прикрепляться к конкретному центру.

Как волонтёр, я хочу иметь возможность самостоятельно открепляться от выбранного волонтёрского центра.

Как администратор, хочу авторизоваться, чтобы иметь возможность просмотреть список не занятых волонтеров и их контактные данные.

**3. Use case**

**Клиент-приложение**

Регистрация

- **Цель:** Создать новый профиль 
- **Актор:** Волонтёр 
- **Предусловие:** Зайти в приложение
- **Основной поток:** 
  1. Приложение открыто
  2. Ввод всех необходимых личных данных
  3. Нажатие на кнопку регистрации
- **Альтернативный поток:**
  1. Данные не валидны или введена уже зарегистрированная почта
  2. Вывод ошибки на экран (Toast)
  3. Попросить пользователя ввести корректные данные

Авторизация

- **Цель:** Авторизация волонтера/администратора для доступа к функционалу приложения
- **Актор:** Волонтёр/администратор
- **Предусловие:** Пользователь существует (уже зарегистрирован)
- **Основной поток:**
  1. Открыть окно с авторизации
  2. Ввод данных
  3. Нажатие на кнопку входа
- **Альтернативный поток:**
  1. Пользователя нет в системе или введены неправильные данные
  2. Вывод ошибки на экран (Toast)
  3. Попросить пользователя ввести корректные данные или завести учётную запись, если таковой не имеется

Редактирование профиля

- **Цель:** Изменить информацию о себе
- **Актор:** Волонтёр/администратор
- **Предусловие:** Авторизация
- **Основной поток:**
  1. Перейти на вкладку своего профиля
  2. Поменять информацию
  3. Нажатие на кнопку сохранения
- **Альтернативный поток:**
  1. Введены не валидные данные
  2. Вывод ошибки на экран (Toast)
  3. Попросить пользователя ввести корректные данные

Просмотр ближайших волонтёрских центров на карте

- **Цель:** Просмотр ближайших волонтёрских центров на карте
- **Актор:** Волонтёр
- **Предусловие:** Авторизация
- **Основной поток:**
1. Открытие вкладки с картой
2. Обозначение всех центров
3. Обозначение точки волонтёра на карте (с помощью геолокации)
4. Приближение масштаба карты к позиции волонтёра

Прикрепление к волонтёрскому центру и просмотр информации

- **Цель:** Прикрепление к волонтёрскому центру и просмотр информации
- **Актор:** Волонтёр
- **Предусловие:** Авторизация
- **Основной поток:**
1. Открытие вкладки с картой
2. Обозначение всех центров
3. Нажатие на конкретный центр
4. Вывод информации
5. Нажатие на кнопку прикрепления к центру
6. Отправка запроса на сервер и изменение статуса пользователя

Просмотр списка активных волонтёров в конкретном центре

- **Цель:** Просмотр списка активных волонтёров в конкретном центре
- **Актор:** Волонтёр
- **Предусловие:** Авторизация
- **Основной поток:**
1. Открытие карты.
2. Обозначение всех центров.
3. Нажатие на конкретный центр.
4. Вывод информации: отправка запроса на сервер, вывод списка прикрепленных к этому центру волонтёров. 

Просмотр списка свободных волонтёров (администратор)

- **Просмотр списка свободных волонтёров**
- **Цель:** Просмотреть список свободных волонтеров 
- **Актор:** Администратор
- **Предусловие:** Авторизация под ролью администратора
- **Основной поток:**
1. Открытие вкладки со списком волонтёров.
2. Получения с сервера списка волонтёров.
3. Фильтрация волонтёров по выбранным фильтрам (все/неактивные/активные; по всем центрам/конкретный центр)
4. Вывод полученного списка на экран

Просмотр информации профиля конкретного волонтёра (при нажатии в центре)

- **Цель:** Просмотр информации профиля конкретного волонтера
- **Актор:** Волонтёр
- **Предусловие:** Авторизация
- **Основной поток:**
1. Открытие карты.
2. Обозначение всех центров.
3. Нажатие на конкретный центр.
4. Открытие списка волонтёров конкретного центра.
5. Получение с сервера списка волонтёров конкретного центра.
6. Вывод полученного списка на экран

Взаимодействие приложение с API сервера

Автозаполнение базы данных (списка волонтёрских центров)

**Сервер-приложение**

Регистрация:

1. Принятие запросов на POST end-point
2. Проверка уникальности нового пользователя (email)
3. Хэширование пароля (BCrypt server)
4. Запись информации о новом пользователе в базу данных
5. Отправка ответа
6. В случае проблемы вернуть ошибку

Авторизация:

1. Принятие запросов на POST end-point
2. Проверка, существует ли такой пользователь
3. Сравнение хэшей пароля из учётной записи и данного при авторизации
4. Предоставление доступа (с разграничением ролей)
5. В случае проблемы вернуть ошибку

Получение данных о волонтёрских центрах:

1. Принятие запросов на GET end-point
2. Отправка данных
3. В случае проблемы вернуть ошибку

Редактирование профиля:

1. Принятие запросов на PATCH end-point
2. Проверка совместимости данных (существует ли изменённая почта)
3. Запись изменённой информации в базу данных
4. Отправка ответа
5. В случае проблемы вернуть ошибку

Просмотр списка волонтёров (администратор):

1. Принятие запросов на GET end-point
2. Обработка информации с конкретными фильтрами (все/неактивные/активные; по всем центрам/конкретный центр)
3. Отправка сформированного списка волонтёров
4. В случае проблемы вернуть ошибку

*User data (объект пользователя):*

1. Айди
2. Имя
3. Фамилия
4. Почта
5. Пароль
6. Роль (волонтёр/администратор)
7. Контактная информация
8. Описания
9. Статус (активен/неактивен)
10. ` `Волонтёрский центр (к которому прикреплён волонтёр, иначе хранит *null*)

**4. Задачи для backend-разработчика:**

1. Реализовать API для регистрации:
   a. Эндпоинт POST /api/auth/reg для регистрации учетной записи.
2. Реализовать API для авторизации:
   a. POST /api/auth/login для проверки учетной записи.
3. Реализовать API для получения списка волонтёров:
   a. Эндпоинт GET /api/volunteer для получения списка волонтеров.
   c. Поддержка фильтрации по всем/активным/неактивным волонтёрам (активные только для роли волонтёра, все/неактивные только для роли администратора)
   d. Поддержка фильтрации по всем/конкретным волонтёрским центрам через параметры запроса.
4. ` `API для получения списка волонтёрских центров:
   a. Эндпоинт GET /api/centers для получения списка волонтёрских центров.
   b. Поддержка фильтрации по области на карте (расстоянию до геолокации волонтёра)
5. Реализовать API для получения и редактирования данных профиля:
   a. Эндпоинт GET /api/volunteer/{id} для получения информации о профиле
   b. Эндпоинт PUT /api/volunteer/{id} для изменения данных профиля.
6. Написать миграции базы данных с Liquibase (таблицы для волонтёров, учетных записей, волонтёрских центров).
7. Настроит Spring Security для разграничения доступа (волонтёр/администратор).
